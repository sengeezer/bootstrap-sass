//
// Dropdown menus

// Use the .menu class on any <li> element within the topbar or
// ul.tabs and you'll get some super fancy dropdowns
.dropup {
	position: relative;
	.caret {
		border: { top: 0; bottom: 4px solid $black; }
		content: "";
	}
	.dropdown-menu {
		top: auto;
		bottom: 100%;
		margin-bottom: 1px;
	}
}

.dropdown {
	position: relative;
	.caret {
		margin: { top: 8px; left: 2px; }
	}
	// Increase padding from 15px to 20px on sides
	.dropdown-menu .nav-header {
		padding: {
			left: 20px;
			right: 20px;
		}
	}
}

// The caret makes the toggle a bit too tall in IE7
.dropdown-toggle { *margin-bottom: -3px; }

.dropdown-toggle:active,
.open .dropdown-toggle { outline: 0; }

// Dropdown arrow/caret

.caret {
	display: inline-block;
	width: 0;
	height: 0;
	vertical-align: top;
	border: {
		top:   4px solid $black;
		right: 4px solid transparent;
		left:  4px solid transparent;
	}
	content: "";
}

// The dropdown menu (ul)

.dropdown-menu {
	position: absolute;
	top: 100%;
	left: 0;
	z-index: $zindexDropdown;
	display: none; // none by default, but block on "open" of the menu
	float: left;
	min-width: 160px;
	padding: 5px 0;
	margin: 2px 0 0; // override default ul
	list-style: none;
	background-color: $dropdownBackground;
	border: 1px solid #ccc; // Fallback for IE7-8
	border: 1px solid $dropdownBorder;
	*border-right-width: 2px;
	*border-bottom-width: 2px;
	@include border-radius(6px);
	@include box-shadow(#{0 5px 10px rgba(0,0,0,.2)});
	@include background-clip(padding-box);

	// Aligns the dropdown menu to right
	&.pull-right {
		right: 0;
		left: auto;
	}

	// Dividers (basically an hr) within the dropdown
	.divider { @include nav-divider($dropdownDividerTop, $dropdownDividerBottom); }

	// Links within the dropdown menu
	a {
		display: block;
		padding: 3px 20px;
		clear: both;
		font-weight: normal;
		line-height: $baseLineHeight;
		color: $dropdownLinkColor;
		white-space: nowrap;
	}
	li > a {
		&:hover, &:focus {
			text-decoration: none;
			color: $dropdownLinkColorHover;
			background-color: $dropdownLinkBackgroundHover;
			@include gradient-vertical($dropdownLinkBackgroundHover, darken($dropdownLinkBackgroundHover, 5%));
		}
	}
	.active > a,
	.active > a:hover {
		color: $dropdownLinkColorHover;
		text-decoration: none;
		outline: 0;
		background-color: $dropdownLinkBackgroundActive;
		@include gradient-vertical($dropdownLinkBackgroundActive, darken($dropdownLinkBackgroundActive, 5%));
	}
	.disabled > a {
		color: $grayLight;
		&:hover {
			color: $grayLight;
			text-decoration: none;
			background-color: transparent;
			cursor: default;
		}
		
	}
}

.dropdown-submenu:hover > a {
	text-decoration: none;
	color: $dropdownLinkColorHover;
	background-color: $dropdownLinkBackgroundHover;
	@include gradient-vertical($dropdownLinkBackgroundHover, darken($dropdownLinkBackgroundHover, 5%));
}

.open {
	// IE7's z-index only goes to the nearest positioned ancestor, which would
	// make the menu appear below buttons that appeared later on the page
	*z-index: $zindexDropdown;
	> .dropdown-menu { display: block; }
}

.pull-right > .dropdown-menu { right: 0; left: auto; }

// Allow for dropdowns to go bottom up (aka, dropup-menu)

// Just add .dropup after the standard .dropdown class and you're set, bro.
// TODO: abstract this so that the navbar fixed styles are not placed here?
.navbar-fixed-bottom .dropdown {
	// Reverse the caret
	.caret {
		border: {
			top: 0;
			bottom: 4px solid $black;
		}
		content: "";
	}
	// Different positioning for bottom up menu
	.dropdown-menu {
		top: auto;
		bottom: 100%;
		margin-bottom: 1px;
	}
}

// Sub menus

.dropdown-submenu {
	position: relative;
	> .dropdown-menu {
		top: 0;
		left: 100%;
		margin-top: -6px;
		margin-left: -1px;
		@include border-radius(0 6px 6px 6px);
	}
	&:hover {
		.dropdown-menu { display: block; }
		> a:after { border-left-color: $dropdownLinkColorHover; }
	}
	> a:after {
		display: block;
		content: " ";
		float: right;
		width: 0;
		height: 0;
		border: {
			color: transparent;
			style: solid;
			width: 5px 0 5px 5px;
			left-color: darken($dropdownBackground, 20%);
		}
		margin: {
			top: 5px;
			right: -10px;
		}
	}
}

// Typeahead

.typeahead {
	margin-top: 2px; // give it some space to breathe
	@include border-radius(4px);
}
